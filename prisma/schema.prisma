generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/@prisma/client"
}

datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

model User {
  id                       Int               @id @default(autoincrement())
  name                     String
  email                    String            @unique
  password                 String
  createdAt                DateTime          @default(now())
  updatedAt                DateTime          @updatedAt
  follows                  Follows[]         @relation(name: "follower")
  following_user           Follows[]         @relation(name: "following_user")
  sent_direct_messages     Direct_Messages[] @relation(name: "sent_user")
  received_direct_messages Direct_Messages[] @relation(name: "received_user")
  search                   Search[]          @relation(name: "search_user")
  tweets                   Tweets[]          @relation(name: "tweet_user")
}

model Tweets {
  id            Int      @id @default(autoincrement())
  tweet_user_id Int
  tweet_user    User     @relation(fields: tweet_user_id, references: id, name: "tweet_user")
  text          String
  image         String
  date_created  DateTime
  likes         Int
  retweets      Int
}

model Follows {
  id                Int      @id @default(autoincrement())
  follower_id       Int
  follower          User     @relation(fields: follower_id, references: id, name: "follower")
  following_user_id Int
  following_user    User     @relation(fields: following_user_id, references: id, name: "following_user")
  date_created      DateTime
}

model Direct_Messages {
  id                Int      @id @default(autoincrement())
  sender_user_id    Int
  sender_user       User     @relation(fields: sender_user_id, references: id, name: "sent_user")
  recipient_user_id Int
  recipient_user    User     @relation(fields: recipient_user_id, references: id, name: "received_user")
  message           String
  date_sent         DateTime
}

model Search {
  id             Int      @id @default(autoincrement())
  query          String
  date_searched  DateTime
  search_user_id Int
  search_user    User     @relation(fields: search_user_id, references: id, name: "search_user")
}
