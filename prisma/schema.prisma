generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url = env("DB_URL")
}

model User {
  id Int @id @default(autoincrement())
  name String
  email String @unique
  password String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  follows Follows[] @relation(name: "follower")
  sent_direct_messages Direct_Messages[] @relation(name: "sender_user")
  received_direct_messages Direct_Messages[] @relation(name: "recipient_user")
  search Search[] @relation(name: "search_user")
  tweets Tweets[] @relation(name: "tweet_user")
}

model Tweets {
  id Int @id @default(autoincrement())
  tweet_user_id Int
  tweet_user User @relation(fields: id , references: tweet_user_id)
  text String
  image String
  date_created DateTime
  likes Int
  retweets Int
}

model Follows {
    id Int @id @default(autoincrement())
    follower_id Int
    follower User @relation(fields: {id: {references: follower_id}})
    following_user_id Int
    following_user User @relation(fields: {id: {references: following_user_id}})
    date_created DateTime
}

model Direct_Messages {
  id Int @id @default(autoincrement())
  sender_user_id Int
  sender_user User @relation(fields: id, references: sender_user_id)
  recipient_user_id Int
  recipient_user User @relation(fields: id ,references: recipient_user_id)
  message String
  date_sent DateTime
}

model Search {
  id Int @id @default(autoincrement())
  query String
  date_searched DateTime
  search_user_id Int
  search_user User @relation(fields: id, references: search_user_id)
}
